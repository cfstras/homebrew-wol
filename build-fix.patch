diff --git a/lib/realloc.c b/lib/realloc.c
--- a/lib/realloc.c
+++ b/lib/realloc.c
@@ -24,8 +24,12 @@
 
 #include <sys/types.h>
 
-char *malloc ();
-char *realloc ();
+#if STDC_HEADERS
+# include <stdlib.h>
+#else
+void *malloc ();
+void *realloc ();
+#endif
 
 /* Change the size of an allocated block of memory P to N bytes,
    with error checking.  If N is zero, change it to 1.  If P is NULL,

diff --git a/lib/getline.h b/lib/getline.h
--- a/lib/getline.h
+++ b/lib/getline.h
@@ -25,12 +25,12 @@
 
 # include <stdio.h>
 
-# if __GLIBC__ < 2
+# if defined(__GLIBC__) && (__GLIBC__ < 2)
 int
 getline PARAMS ((char **_lineptr, size_t *_n, FILE *_stream));
 
 int
 getdelim PARAMS ((char **_lineptr, size_t *_n, int _delimiter, FILE *_stream));
 # endif

